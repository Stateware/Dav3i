/*! Dav3i - v0.1.0 - 2015-08-22
* https://github.com/Stateware/Dav3i
* Copyright (c) 2015 Stateware Team;
 Licensed GPL v3 (https://github.com/Stateware/Dav3i/blob/master/LICENSE) */
$(".loading-screen").ready(function(){ParseDescriptor(),$(".spinner").fadeOut(3e3),setTimeout(function(){$(".begin").fadeIn(1500)},3e3)}),$(function(){ColorByHMS=function(){var a,b,c,d,e,f={},g=g_StatID,h=0;for(e=0;e<g_ParsedStatList[1].length&&1!==h;e++)g_ParsedStatList[1][e]===g_StatID&&1===g_ParsedStatList[0][e]&&(h=1,1===g_VaccHMS?g=g_ParsedStatList[2][e]:2===g_VaccHMS&&(g=g_ParsedStatList[3][e]));$.when(GetHMS(g,g_HMSYear)).done(function(e){c=Number.MAX_VALUE,d=Number.MIN_VALUE,SetHMS(e[g]);for(a in map.regions)b=Hash(a),void 0!==g_LookupTable[b]&&-1!==g_LookupTable[b][4]&&(f[a]=g_LookupTable[b][4],f[a]<c&&(c=f[a]),f[a]>d&&(d=f[a]));map.series.regions[0].params.min=c,map.series.regions[0].params.max=d,map.reset(),map.series.regions[0].setValues(f),g_HMSReady||(g_HMSReady=!0)})},map=new jvm.Map({map:"world_mill_en",container:$("#map"),regionsSelectable:!0,backgroundColor:"transparent",regionStyle:{initial:{fill:"#888888"},hover:{"fill-opacity":.7},selected:{"stroke-width":.4,stroke:"#000000",fill:"#7FDBFF"}},series:{regions:[{attribute:"fill",values:{ID:148576,PG:13120.4,MX:40264.8,EE:78.6,DZ:30744.6,MA:24344.4,MR:14117.6,SN:39722.6,GM:7832.6,GW:9902.2},scale:["#22FF70","#1D7950"],normalizeFunction:"polynomial"}]},onRegionSelected:function(){g_Clear!==!0&&(BuildList(map.getSelectedRegions()),GenerateSubDivs(),GenerateGraphs())},onRegionTipShow:function(a,b,c){var d,e,f="",g=0,h=g_StatID,i=wNumb({thousand:","});for(e=Hash(c),f+=void 0!==g_LookupTable[e]?g_LookupTable[e][2]+" - ":b.html()+" - ",d=0;d<g_ParsedStatList[1].length&&1!==g;d++)g_ParsedStatList[1][d]===g_StatID&&1===g_ParsedStatList[0][d]&&(g=1,1===g_VaccHMS?h=g_ParsedStatList[2][d]:2===g_VaccHMS&&(h=g_ParsedStatList[3][d]));if(1===g){for(d=0;d<g_StatList[h].indexOf("VACC")-1;d++)f+=g_StatList[h][d];f+=" Vaccinations"}else f+=g_StatList[h];f+=" in "+g_HMSYear+": ",f+=void 0===map.series.regions[0].values[c]?"No Data Available":1===g?(100*map.series.regions[0].values[c]).toFixed(0)+"%":i.to(Number(map.series.regions[0].values[c])),b.html(f)}}),document.getElementById("clear").onclick=function(){var a="id-"+g_StatList[g_StatID]+"-graphs";document.getElementById(a).innerHTML="",g_Clear=!0,map.clearSelectedRegions(),BuildList([]),g_Clear=!1}});